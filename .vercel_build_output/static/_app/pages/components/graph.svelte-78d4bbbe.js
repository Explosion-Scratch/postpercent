import{S as t,i as n,s as a,N as s,e,c as o,a as c,d as r,b as l,f as i,O as u,v as h,r as f,M as g,z as d,t as m,k as p,g as $,n as b,G as k,h as y,H as v,j as w,m as j,o as M,w as x,l as G,B as I,u as N,P as S}from"../../chunks/vendor-8e9baeca.js";import{p as B,a as E}from"../../chunks/storage-e20d6f2e.js";import P from"./bar.svelte-61270a5d.js";function z(t,n,a){const s=t.slice();return s[11]=n[a].username,s[12]=n[a].counts,s[14]=a,s}function A(t){let n,a,s,u,h,f,g,d=t[1]+1+"";return{c(){n=e("p"),a=m("how did you find page "),s=m(d),u=m(" are you hacking"),h=p(),f=e("img"),this.h()},l(t){n=o(t,"P",{});var e=c(n);a=$(e,"how did you find page "),s=$(e,d),u=$(e," are you hacking"),e.forEach(r),h=b(t),f=o(t,"IMG",{src:!0}),this.h()},h(){f.src!==(g="https://media1.tenor.com/images/a7e1806acb87623ea0d4fda7bcfb4306/tenor.gif")&&l(f,"src","https://media1.tenor.com/images/a7e1806acb87623ea0d4fda7bcfb4306/tenor.gif")},m(t,e){i(t,n,e),k(n,a),k(n,s),k(n,u),i(t,h,e),i(t,f,e)},p(t,n){2&n&&d!==(d=t[1]+1+"")&&y(s,d)},i:v,o:v,d(t){t&&r(n),t&&r(h),t&&r(f)}}}function C(t){let n,a,s=t[2],e=[];for(let c=0;c<s.length;c+=1)e[c]=H(z(t,s,c));const o=t=>f(e[t],1,1,(()=>{e[t]=null}));return{c(){for(let t=0;t<e.length;t+=1)e[t].c();n=G()},l(t){for(let n=0;n<e.length;n+=1)e[n].l(t);n=G()},m(t,s){for(let n=0;n<e.length;n+=1)e[n].m(t,s);i(t,n,s),a=!0},p(t,a){if(7&a){let c;for(s=t[2],c=0;c<s.length;c+=1){const o=z(t,s,c);e[c]?(e[c].p(o,a),h(e[c],1)):(e[c]=H(o),e[c].c(),h(e[c],1),e[c].m(n.parentNode,n))}for(I(),c=s.length;c<e.length;c+=1)o(c);N()}},i(t){if(!a){for(let t=0;t<s.length;t+=1)h(e[t]);a=!0}},o(t){e=e.filter(Boolean);for(let n=0;n<e.length;n+=1)f(e[n]);a=!1},d(t){S(e,t),t&&r(n)}}}function H(t){let n,a;return n=new P({props:{username:t[11],posts:t[12][t[0]].count,rank:t[14]+1+100*t[1],width:t[12][t[0]].count/t[2][0].counts[t[0]].count*97}}),{c(){w(n.$$.fragment)},l(t){j(n.$$.fragment,t)},m(t,s){M(n,t,s),a=!0},p(t,a){const s={};4&a&&(s.username=t[11]),5&a&&(s.posts=t[12][t[0]].count),2&a&&(s.rank=t[14]+1+100*t[1]),5&a&&(s.width=t[12][t[0]].count/t[2][0].counts[t[0]].count*97),n.$set(s)},i(t){a||(h(n.$$.fragment,t),a=!0)},o(t){f(n.$$.fragment,t),a=!1},d(t){x(n,t)}}}function L(t){let n,a;return{c(){n=e("img"),this.h()},l(t){n=o(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){n.src!==(a="../../static/loading.gif")&&l(n,"src","../../static/loading.gif"),l(n,"alt","Loading"),l(n,"class","loading")},m(t,a){i(t,n,a)},p:v,i:v,o:v,d(t){t&&r(n)}}}function O(t){let n,a,g,d={ctx:t,current:null,token:null,hasCatch:!0,pending:L,then:C,catch:A,blocks:[,,,]};return s(a=t[3],d),{c(){n=e("main"),d.block.c(),this.h()},l(t){n=o(t,"MAIN",{class:!0});var a=c(n);d.block.l(a),a.forEach(r),this.h()},h(){l(n,"class","svelte-1gj3lpg")},m(t,a){i(t,n,a),d.block.m(n,d.anchor=null),d.mount=()=>n,d.anchor=null,g=!0},p(n,[e]){t=n,d.ctx=t,8&e&&a!==(a=t[3])&&s(a,d)||u(d,t,e)},i(t){g||(h(d.block),g=!0)},o(t){for(let n=0;n<3;n+=1){const t=d.blocks[n];f(t)}g=!1},d(t){t&&r(n),d.block.d(),d.token=null,d=null}}}function q(t,n,a){let s,e;g(t,B,(t=>a(1,s=t))),g(t,E,(t=>a(6,e=t)));let o,c,r,{category:l}=n,i=s,u=e;async function h(){await fetch(`https://scratchdb.lefty.one/v3/forum/category/rank/${l}/${s}`).then((t=>t.json())).then((t=>{a(2,o=t),c=1;for(let n=0;n<String(o[0].counts[l].count).length-1;n++)c+=String(0);r=Math.round(o[0].counts[l].count/c),o[0].counts[l].count}))}let f=h();return d((async()=>{a(3,f=h())})),t.$$set=t=>{"category"in t&&a(0,l=t.category)},t.$$.update=()=>{18&t.$$.dirty&&s!=i&&(a(3,f=h()),a(4,i=s)),96&t.$$.dirty&&e!=u&&(a(3,f=h()),a(5,u=e))},[l,s,o,f,i,u,e]}export default class extends t{constructor(t){super(),n(this,t,q,O,a,{category:0})}}
