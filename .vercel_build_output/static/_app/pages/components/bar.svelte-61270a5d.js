import{S as s,i as a,s as r,e,t as n,k as t,c as l,a as c,g as h,d as o,n as i,b as u,J as f,f as d,G as v,h as p,H as m,z as E}from"../../chunks/vendor-8e9baeca.js";function g(s){let a,r,f,m,E,g,I,b,k,w,y,L,x,A,$;return{c(){a=e("li"),r=e("a"),f=e("span"),E=t(),g=e("li"),I=e("a"),b=e("nobr"),k=n(s[0]),y=t(),L=e("li"),x=e("a"),A=n(s[1]),this.h()},l(e){a=l(e,"LI",{class:!0});var n=c(a);r=l(n,"A",{href:!0});var t=c(r);f=l(t,"SPAN",{class:!0,"data-icon":!0,"data-inline":!0}),c(f).forEach(o),t.forEach(o),n.forEach(o),E=i(e),g=l(e,"LI",{class:!0});var u=c(g);I=l(u,"A",{href:!0});var d=c(I);b=l(d,"NOBR",{});var v=c(b);k=h(v,s[0]),v.forEach(o),d.forEach(o),u.forEach(o),y=i(e),L=l(e,"LI",{class:!0});var p=c(L);x=l(p,"A",{href:!0});var m=c(x);A=h(m,s[1]),m.forEach(o),p.forEach(o),this.h()},h(){u(f,"class","iconify"),u(f,"data-icon","ant-design:user-outlined"),u(f,"data-inline","false"),u(r,"href",m="/users/"+s[0]),u(a,"class","svelte-1ldinl6"),u(I,"href",w="/users/"+s[0]),u(g,"class","username svelte-1ldinl6"),u(x,"href",$="/users/"+s[0]),u(L,"class","posts svelte-1ldinl6")},m(s,e){d(s,a,e),v(a,r),v(r,f),d(s,E,e),d(s,g,e),v(g,I),v(I,b),v(b,k),d(s,y,e),d(s,L,e),v(L,x),v(x,A)},p(s,a){1&a&&m!==(m="/users/"+s[0])&&u(r,"href",m),1&a&&p(k,s[0]),1&a&&w!==(w="/users/"+s[0])&&u(I,"href",w),2&a&&p(A,s[1]),1&a&&$!==($="/users/"+s[0])&&u(x,"href",$)},d(s){s&&o(a),s&&o(E),s&&o(g),s&&o(y),s&&o(L)}}}function I(s){let a,r,f,m,E,g,I,b,k,w,y,L,x,A,$,j,_,N=s[4].username+"";return{c(){a=e("li"),r=e("a"),f=e("img"),I=t(),b=e("li"),k=e("a"),w=e("nobr"),y=n(N),x=t(),A=e("li"),$=e("a"),j=n(s[1]),this.h()},l(e){a=l(e,"LI",{class:!0});var n=c(a);r=l(n,"A",{href:!0});var t=c(r);f=l(t,"IMG",{src:!0,style:!0}),t.forEach(o),n.forEach(o),I=i(e),b=l(e,"LI",{class:!0});var u=c(b);k=l(u,"A",{href:!0});var d=c(k);w=l(d,"NOBR",{});var v=c(w);y=h(v,N),v.forEach(o),d.forEach(o),u.forEach(o),x=i(e),A=l(e,"LI",{class:!0});var p=c(A);$=l(p,"A",{href:!0});var m=c($);j=h(m,s[1]),m.forEach(o),p.forEach(o),this.h()},h(){f.src!==(m="https://cdn2.scratch.mit.edu/get_image/user/"+s[4].id+"_90x90.png")&&u(f,"src",m),u(f,"style",E=s[3]>5?"width: 2em; height: 2em;":"display: none;"),u(r,"href",g="/users/"+s[4].username),u(a,"class","svelte-1ldinl6"),u(k,"href",L="/users/"+s[4].username),u(b,"class","username svelte-1ldinl6"),u($,"href",_="/users/"+s[4].username),u(A,"class","posts svelte-1ldinl6")},m(s,e){d(s,a,e),v(a,r),v(r,f),d(s,I,e),d(s,b,e),v(b,k),v(k,w),v(w,y),d(s,x,e),d(s,A,e),v(A,$),v($,j)},p(s,a){16&a&&f.src!==(m="https://cdn2.scratch.mit.edu/get_image/user/"+s[4].id+"_90x90.png")&&u(f,"src",m),8&a&&E!==(E=s[3]>5?"width: 2em; height: 2em;":"display: none;")&&u(f,"style",E),16&a&&g!==(g="/users/"+s[4].username)&&u(r,"href",g),16&a&&N!==(N=s[4].username+"")&&p(y,N),16&a&&L!==(L="/users/"+s[4].username)&&u(k,"href",L),2&a&&p(j,s[1]),16&a&&_!==(_="/users/"+s[4].username)&&u($,"href",_)},d(s){s&&o(a),s&&o(I),s&&o(b),s&&o(x),s&&o(A)}}}function b(s){let a,r,E,b,k,w;function y(s,a){return s[4]?I:g}let L=y(s),x=L(s);return{c(){a=e("div"),r=e("ul"),E=e("li"),b=n(s[2]),k=t(),w=e("ul"),x.c(),this.h()},l(e){a=l(e,"DIV",{id:!0,class:!0});var n=c(a);r=l(n,"UL",{class:!0});var t=c(r);E=l(t,"LI",{class:!0});var u=c(E);b=h(u,s[2]),u.forEach(o),t.forEach(o),k=i(n),w=l(n,"UL",{class:!0,style:!0});var f=c(w);x.l(f),f.forEach(o),n.forEach(o),this.h()},h(){u(E,"class","svelte-1ldinl6"),u(r,"class","rank svelte-1ldinl6"),u(w,"class","bar svelte-1ldinl6"),f(w,"width",s[5]+"%"),f(w,"background-color",s[6]),f(w,"color",1==s[7]?"var(--background)":"var(--text)"),f(w,"transition","width 1s, background-color 1s, color 1s"),u(a,"id","container"),u(a,"class","svelte-1ldinl6")},m(s,e){d(s,a,e),v(a,r),v(r,E),v(E,b),v(a,k),v(a,w),x.m(w,null)},p(s,[a]){4&a&&p(b,s[2]),L===(L=y(s))&&x?x.p(s,a):(x.d(1),x=L(s),x&&(x.c(),x.m(w,null))),32&a&&f(w,"width",s[5]+"%"),64&a&&f(w,"background-color",s[6]),128&a&&f(w,"color",1==s[7]?"var(--background)":"var(--text)")},i:m,o:m,d(s){s&&o(a),x.d()}}}function k(s){const a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null}function w(s,a,r){let e,n,{username:t}=a,{posts:l}=a,{rank:c}=a,{width:h}=a,o=0,i="#333333",u=0;async function f(){await fetch(`https://scratchdb.lefty.one/v3/user/info/${t}`).then((s=>s.json())).then((s=>{r(4,e=s),r(5,o=h)})),await fetch(`https://my-ocular.jeffalo.net/api/user/${t}`).then((s=>s.json())).then((s=>{if(n=s,r(6,i=n.color),n.color){const s=[];s.push(k(n.color).r),s.push(k(n.color).g),s.push(k(n.color).b);Math.round((299*parseInt(s[0])+587*parseInt(s[1])+114*parseInt(s[2]))/1e3)>150&&r(7,u=1)}}))}return f(),E((async()=>{f()})),s.$$set=s=>{"username"in s&&r(0,t=s.username),"posts"in s&&r(1,l=s.posts),"rank"in s&&r(2,c=s.rank),"width"in s&&r(3,h=s.width)},[t,l,c,h,e,o,i,u]}export default class extends s{constructor(s){super(),a(this,s,w,b,r,{username:0,posts:1,rank:2,width:3})}}
