import{S as t,i as e,s as a,N as s,e as n,t as r,c as l,a as c,g as o,d as u,b as h,f,G as i,h as d,k as g,n as v,l as m,E as p,J as E,O as b,v as x,r as k,z,H as S,K as I,R as $,j as L,m as D,o as w,P as y,w as M}from"../../chunks/vendor-8e9baeca.js";import{a as j}from"../../chunks/storage-e20d6f2e.js";import N from"./components/charts.svelte-f5a6ca01.js";function A(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function O(t){return String(t).length>1&&1!=String(t)[String(t).length-2]||1==String(t).length?"1"==String(t)[String(t).length-1]?`${t}st`:"2"==String(t)[String(t).length-1]?`${t}nd`:"3"==String(t)[String(t).length-1]?`${t}rd`:`${t}th`:String(t).length>1&&1==String(t)[String(t).length-2]?`${t}th`:`${t} bug!`}function R(t,e,a){const s=t.slice();return s[10]=e[a],s}function U(t){return document.title="Error loading user "+t[0],{c:S,l:S,m:S,d:S}}function B(t){return document.title=t[0]+" - postpercent",{c:S,l:S,m:S,d:S}}function F(t){return document.title="Loading user "+t[0],{c:S,l:S,m:S,d:S}}function G(t){let e,a,s;return{c(){e=n("a"),a=n("span"),this.h()},l(t){e=l(t,"A",{href:!0});var s=c(e);a=l(s,"SPAN",{class:!0,"data-icon":!0,"data-inline":!0}),c(a).forEach(u),s.forEach(u),this.h()},h(){h(a,"class","iconify"),h(a,"data-icon","ant-design:user-outlined"),h(a,"data-inline","false"),h(e,"href",s="/users/"+t[0])},m(t,s){f(t,e,s),i(e,a)},p(t,a){1&a&&s!==(s="/users/"+t[0])&&h(e,"href",s)},d(t){t&&u(e)}}}function J(t){let e,a,s,r;return{c(){e=n("a"),a=n("img"),this.h()},l(t){e=l(t,"A",{href:!0});var s=c(e);a=l(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(u),this.h()},h(){a.src!==(s="https://cdn2.scratch.mit.edu/get_image/user/"+t[1].id+"_150x150.png")&&h(a,"src",s),h(a,"alt",t[0]),h(a,"class","svelte-1xfozvg"),h(e,"href",r="/users/"+t[1].username)},m(t,s){f(t,e,s),i(e,a)},p(t,n){2&n&&a.src!==(s="https://cdn2.scratch.mit.edu/get_image/user/"+t[1].id+"_150x150.png")&&h(a,"src",s),1&n&&h(a,"alt",t[0]),2&n&&r!==(r="/users/"+t[1].username)&&h(e,"href",r)},d(t){t&&u(e)}}}function P(t){let e;return{c(){e=r("Getting status...")},l(t){e=o(t,"Getting status...")},m(t,a){f(t,e,a)},p:S,d(t){t&&u(e)}}}function Y(t){let e;function a(t,e){return"no user found"==t[3].error?C:_}let s=a(t),n=s(t);return{c(){n.c(),e=m()},l(t){n.l(t),e=m()},m(t,a){n.m(t,a),f(t,e,a)},p(t,r){s===(s=a(t))&&n?n.p(t,r):(n.d(1),n=s(t),n&&(n.c(),n.m(e.parentNode,e)))},d(t){n.d(t),t&&u(e)}}}function _(t){let e,a=t[3].status+"";return{c(){e=r(a)},l(t){e=o(t,a)},m(t,a){f(t,e,a)},p(t,s){8&s&&a!==(a=t[3].status+"")&&d(e,a)},d(t){t&&u(e)}}}function C(t){let e;return{c(){e=r("No Ocular status found")},l(t){e=o(t,"No Ocular status found")},m(t,a){f(t,e,a)},p:S,d(t){t&&u(e)}}}function H(t){let e,a,s=t[2].counts.total.count+"";return{c(){e=n("li"),a=r(s),this.h()},l(t){e=l(t,"LI",{class:!0});var n=c(e);a=o(n,s),n.forEach(u),this.h()},h(){h(e,"class","total-posts svelte-1xfozvg")},m(t,s){f(t,e,s),i(e,a)},p(t,e){4&e&&s!==(s=t[2].counts.total.count+"")&&d(a,s)},d(t){t&&u(e)}}}function T(t){let e,a,s=O(t[2].counts.total.rank)+"";return{c(){e=n("li"),a=r(s),this.h()},l(t){e=l(t,"LI",{class:!0});var n=c(e);a=o(n,s),n.forEach(u),this.h()},h(){h(e,"class","ranking svelte-1xfozvg")},m(t,s){f(t,e,s),i(e,a)},p(t,e){4&e&&s!==(s=O(t[2].counts.total.rank)+"")&&d(a,s)},d(t){t&&u(e)}}}function V(t){let e,a,s,h,m,p,E=t[7][new Date(t[2].firstSeen.date).getMonth()]+"",b=O(new Date(t[2].firstSeen.date).getDate())+"",x=new Date(t[2].firstSeen.date).getFullYear()+"";return{c(){e=n("nobr"),a=r(E),s=g(),h=r(b),m=r(", "),p=r(x)},l(t){e=l(t,"NOBR",{});var n=c(e);a=o(n,E),s=v(n),h=o(n,b),m=o(n,", "),p=o(n,x),n.forEach(u)},m(t,n){f(t,e,n),i(e,a),i(e,s),i(e,h),i(e,m),i(e,p)},p(t,e){4&e&&E!==(E=t[7][new Date(t[2].firstSeen.date).getMonth()]+"")&&d(a,E),4&e&&b!==(b=O(new Date(t[2].firstSeen.date).getDate())+"")&&d(h,b),4&e&&x!==(x=new Date(t[2].firstSeen.date).getFullYear()+"")&&d(p,x)},d(t){t&&u(e)}}}function K(t){let e,a,s,h,m,p,E=t[7][new Date(t[2].lastSeen.date).getMonth()]+"",b=O(new Date(t[2].lastSeen.date).getDate())+"",x=new Date(t[2].lastSeen.date).getFullYear()+"";return{c(){e=n("nobr"),a=r(E),s=g(),h=r(b),m=r(", "),p=r(x)},l(t){e=l(t,"NOBR",{});var n=c(e);a=o(n,E),s=v(n),h=o(n,b),m=o(n,", "),p=o(n,x),n.forEach(u)},m(t,n){f(t,e,n),i(e,a),i(e,s),i(e,h),i(e,m),i(e,p)},p(t,e){4&e&&E!==(E=t[7][new Date(t[2].lastSeen.date).getMonth()]+"")&&d(a,E),4&e&&b!==(b=O(new Date(t[2].lastSeen.date).getDate())+"")&&d(h,b),4&e&&x!==(x=new Date(t[2].lastSeen.date).getFullYear()+"")&&d(p,x)},d(t){t&&u(e)}}}function q(t){let e;return{c(){e=r("something broke")},l(t){e=o(t,"something broke")},m(t,a){f(t,e,a)},p:S,i:S,o:S,d(t){t&&u(e)}}}function Q(t){let e,a,s,r,o,i,d=Object.entries(t[2].counts),m=[];for(let n=0;n<d.length;n+=1)m[n]=X(R(t,d,n));return o=new N({props:{username:t[0],color:t[3].color?t[3].color:"#f54260"}}),{c(){e=n("div");for(let t=0;t<m.length;t+=1)m[t].c();a=g(),s=n("br"),r=g(),L(o.$$.fragment),this.h()},l(t){e=l(t,"DIV",{class:!0});var n=c(e);for(let e=0;e<m.length;e+=1)m[e].l(n);n.forEach(u),a=v(t),s=l(t,"BR",{}),r=v(t),D(o.$$.fragment,t),this.h()},h(){h(e,"class","post-dist-container svelte-1xfozvg")},m(t,n){f(t,e,n);for(let a=0;a<m.length;a+=1)m[a].m(e,null);f(t,a,n),f(t,s,n),f(t,r,n),w(o,t,n),i=!0},p(t,a){if(4&a){let s;for(d=Object.entries(t[2].counts),s=0;s<d.length;s+=1){const n=R(t,d,s);m[s]?m[s].p(n,a):(m[s]=X(n),m[s].c(),m[s].m(e,null))}for(;s<m.length;s+=1)m[s].d(1);m.length=d.length}const s={};1&a&&(s.username=t[0]),8&a&&(s.color=t[3].color?t[3].color:"#f54260"),o.$set(s)},i(t){i||(x(o.$$.fragment,t),i=!0)},o(t){k(o.$$.fragment,t),i=!1},d(t){t&&u(e),y(m,t),t&&u(a),t&&u(s),t&&u(r),M(o,t)}}}function W(t){let e,a,s,m,p,b,x,k,z,S,L,D,w,y,M,N,A,R,U=t[10][0]+"",B=t[10][1].count+"",F=O(t[10][1].rank)+"",G=Math.round(t[10][1].count/t[2].counts.total.count*1e4)/100+"";return{c(){e=n("div"),a=n("li"),s=n("a"),m=r(U),p=g(),b=n("ul"),x=n("li"),k=r(B),z=g(),S=n("li"),L=r(F),D=g(),w=n("li"),y=r(G),M=r("%"),N=g(),this.h()},l(t){e=l(t,"DIV",{class:!0,style:!0});var n=c(e);a=l(n,"LI",{class:!0});var r=c(a);s=l(r,"A",{href:!0});var h=c(s);m=o(h,U),h.forEach(u),r.forEach(u),p=v(n),b=l(n,"UL",{class:!0});var f=c(b);x=l(f,"LI",{class:!0});var i=c(x);k=o(i,B),i.forEach(u),z=v(f),S=l(f,"LI",{class:!0});var d=c(S);L=o(d,F),d.forEach(u),D=v(f),w=l(f,"LI",{class:!0});var g=c(w);y=o(g,G),M=o(g,"%"),g.forEach(u),f.forEach(u),N=v(n),n.forEach(u),this.h()},h(){h(s,"href","../"),h(a,"class","svelte-1xfozvg"),h(x,"class","svelte-1xfozvg"),h(S,"class","svelte-1xfozvg"),h(w,"class","svelte-1xfozvg"),h(b,"class","svelte-1xfozvg"),h(e,"class","post-dist-bar svelte-1xfozvg"),E(e,"background-color","rgb("+100*Math.random()+","+100*Math.random()+","+100*Math.random()+")"),E(e,"order",-1*t[10][1].count)},m(n,r){f(n,e,r),i(e,a),i(a,s),i(s,m),i(e,p),i(e,b),i(b,x),i(x,k),i(b,z),i(b,S),i(S,L),i(b,D),i(b,w),i(w,y),i(w,M),i(e,N),A||(R=I(s,"click",(function(){$(j.set(t[10][0]))&&j.set(t[10][0]).apply(this,arguments)})),A=!0)},p(a,s){t=a,4&s&&U!==(U=t[10][0]+"")&&d(m,U),4&s&&B!==(B=t[10][1].count+"")&&d(k,B),4&s&&F!==(F=O(t[10][1].rank)+"")&&d(L,F),4&s&&G!==(G=Math.round(t[10][1].count/t[2].counts.total.count*1e4)/100+"")&&d(y,G),4&s&&E(e,"order",-1*t[10][1].count)},d(t){t&&u(e),A=!1,R()}}}function X(t){let e,a="total"!=t[10][0]&&W(t);return{c(){a&&a.c(),e=m()},l(t){a&&a.l(t),e=m()},m(t,s){a&&a.m(t,s),f(t,e,s)},p(t,s){"total"!=t[10][0]?a?a.p(t,s):(a=W(t),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},d(t){a&&a.d(t),t&&u(e)}}}function Z(t){let e,a;return{c(){e=n("img"),this.h()},l(t){e=l(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){e.src!==(a="../../static/loading.gif")&&h(e,"src","../../static/loading.gif"),h(e,"alt","Loading"),h(e,"class","loading")},m(t,a){f(t,e,a)},p:S,i:S,o:S,d(t){t&&u(e)}}}function tt(t){let e,a,z,S,I,$,L,D,w,y,M,j,N,A,O,R,_,C,W,X,tt,et,at,st,nt,rt,lt,ct,ot,ut,ht,ft,it,dt,gt,vt,mt,pt,Et,bt,xt,kt,zt,St,It,$t,Lt,Dt={ctx:t,current:null,token:null,hasCatch:!0,pending:F,then:B,catch:U};function wt(t,e){return t[1]?J:G}s(a=t[6],Dt);let yt=wt(t),Mt=yt(t);function jt(t,e){return t[3]?Y:P}let Nt=jt(t),At=Nt(t),Ot=t[2]&&H(t),Rt=t[2]&&T(t),Ut=t[2]&&V(t),Bt=t[2]&&K(t),Ft={ctx:t,current:null,token:null,hasCatch:!0,pending:Z,then:Q,catch:q,blocks:[,,,]};return s(St=t[6],Ft),{c(){e=m(),Dt.block.c(),z=g(),S=n("header"),I=n("ul"),$=n("li"),Mt.c(),L=g(),D=n("ul"),w=n("li"),y=n("a"),M=n("nobr"),j=r(t[0]),A=g(),O=n("li"),At.c(),R=g(),_=n("ul"),C=n("ul"),W=n("li"),X=r("Total Posts"),tt=g(),Ot&&Ot.c(),et=g(),at=n("ul"),st=n("li"),nt=r("Rank"),rt=g(),Rt&&Rt.c(),lt=g(),ct=n("ul"),ot=n("li"),Ut&&Ut.c(),ut=g(),ht=n("li"),Bt&&Bt.c(),ft=g(),it=n("li"),dt=n("a"),gt=r("scratch"),mt=g(),pt=n("li"),Et=n("a"),bt=r("ocular"),kt=g(),zt=n("main"),Ft.block.c(),It=g(),$t=n("br"),this.h()},l(a){const s=p('[data-svelte="svelte-zgdwju"]',document.head);e=m(),Dt.block.l(s),s.forEach(u),z=v(a),S=l(a,"HEADER",{style:!0,class:!0});var n=c(S);I=l(n,"UL",{class:!0});var r=c(I);$=l(r,"LI",{class:!0});var h=c($);Mt.l(h),h.forEach(u),r.forEach(u),L=v(n),D=l(n,"UL",{class:!0});var f=c(D);w=l(f,"LI",{class:!0});var i=c(w);y=l(i,"A",{href:!0});var d=c(y);M=l(d,"NOBR",{});var g=c(M);j=o(g,t[0]),g.forEach(u),d.forEach(u),i.forEach(u),A=v(f),O=l(f,"LI",{class:!0});var E=c(O);At.l(E),E.forEach(u),R=v(f),_=l(f,"UL",{class:!0});var b=c(_);C=l(b,"UL",{class:!0});var x=c(C);W=l(x,"LI",{class:!0});var k=c(W);X=o(k,"Total Posts"),k.forEach(u),tt=v(x),Ot&&Ot.l(x),x.forEach(u),et=v(b),at=l(b,"UL",{class:!0});var N=c(at);st=l(N,"LI",{class:!0});var U=c(st);nt=o(U,"Rank"),U.forEach(u),rt=v(N),Rt&&Rt.l(N),N.forEach(u),b.forEach(u),lt=v(f),ct=l(f,"UL",{class:!0});var B=c(ct);ot=l(B,"LI",{class:!0});var F=c(ot);Ut&&Ut.l(F),F.forEach(u),ut=v(B),ht=l(B,"LI",{class:!0});var G=c(ht);Bt&&Bt.l(G),G.forEach(u),ft=v(B),it=l(B,"LI",{class:!0});var J=c(it);dt=l(J,"A",{href:!0});var P=c(dt);gt=o(P,"scratch"),P.forEach(u),J.forEach(u),mt=v(B),pt=l(B,"LI",{class:!0});var Y=c(pt);Et=l(Y,"A",{href:!0});var H=c(Et);bt=o(H,"ocular"),H.forEach(u),Y.forEach(u),B.forEach(u),f.forEach(u),n.forEach(u),kt=v(a),zt=l(a,"MAIN",{class:!0});var T=c(zt);Ft.block.l(T),It=v(T),$t=l(T,"BR",{}),T.forEach(u),this.h()},h(){h($,"class","pfp svelte-1xfozvg"),h(I,"class","pfp-container svelte-1xfozvg"),h(y,"href",N="/users/"+t[0]),h(w,"class","username svelte-1xfozvg"),h(O,"class","status svelte-1xfozvg"),h(W,"class","total-posts-header svelte-1xfozvg"),h(C,"class","total-post-container svelte-1xfozvg"),h(st,"class","ranking-header svelte-1xfozvg"),h(at,"class","rank-container svelte-1xfozvg"),h(_,"class","posts-container svelte-1xfozvg"),h(ot,"class","first-posted svelte-1xfozvg"),h(ht,"class","last-posted svelte-1xfozvg"),h(dt,"href",vt="https:/scratch.mit.edu/users/"+t[0]),h(it,"class","scratch-link svelte-1xfozvg"),h(Et,"href",xt="https://ocular.jeffalo.net/user/"+t[0]),h(pt,"class","ocular-link svelte-1xfozvg"),h(ct,"class","misc-container svelte-1xfozvg"),h(D,"class","info-container svelte-1xfozvg"),E(S,"background-color",t[4]),E(S,"color",1==t[5]?"var(--background)":"var(--text)"),h(S,"class","svelte-1xfozvg"),h(zt,"class","svelte-1xfozvg")},m(t,a){i(document.head,e),Dt.block.m(document.head,Dt.anchor=null),Dt.mount=()=>e.parentNode,Dt.anchor=e,f(t,z,a),f(t,S,a),i(S,I),i(I,$),Mt.m($,null),i(S,L),i(S,D),i(D,w),i(w,y),i(y,M),i(M,j),i(D,A),i(D,O),At.m(O,null),i(D,R),i(D,_),i(_,C),i(C,W),i(W,X),i(C,tt),Ot&&Ot.m(C,null),i(_,et),i(_,at),i(at,st),i(st,nt),i(at,rt),Rt&&Rt.m(at,null),i(D,lt),i(D,ct),i(ct,ot),Ut&&Ut.m(ot,null),i(ct,ut),i(ct,ht),Bt&&Bt.m(ht,null),i(ct,ft),i(ct,it),i(it,dt),i(dt,gt),i(ct,mt),i(ct,pt),i(pt,Et),i(Et,bt),f(t,kt,a),f(t,zt,a),Ft.block.m(zt,Ft.anchor=null),Ft.mount=()=>zt,Ft.anchor=It,i(zt,It),i(zt,$t),Lt=!0},p(e,[n]){t=e,Dt.ctx=t,64&n&&a!==(a=t[6])&&s(a,Dt),yt===(yt=wt(t))&&Mt?Mt.p(t,n):(Mt.d(1),Mt=yt(t),Mt&&(Mt.c(),Mt.m($,null))),(!Lt||1&n)&&d(j,t[0]),(!Lt||1&n&&N!==(N="/users/"+t[0]))&&h(y,"href",N),Nt===(Nt=jt(t))&&At?At.p(t,n):(At.d(1),At=Nt(t),At&&(At.c(),At.m(O,null))),t[2]?Ot?Ot.p(t,n):(Ot=H(t),Ot.c(),Ot.m(C,null)):Ot&&(Ot.d(1),Ot=null),t[2]?Rt?Rt.p(t,n):(Rt=T(t),Rt.c(),Rt.m(at,null)):Rt&&(Rt.d(1),Rt=null),t[2]?Ut?Ut.p(t,n):(Ut=V(t),Ut.c(),Ut.m(ot,null)):Ut&&(Ut.d(1),Ut=null),t[2]?Bt?Bt.p(t,n):(Bt=K(t),Bt.c(),Bt.m(ht,null)):Bt&&(Bt.d(1),Bt=null),(!Lt||1&n&&vt!==(vt="https:/scratch.mit.edu/users/"+t[0]))&&h(dt,"href",vt),(!Lt||1&n&&xt!==(xt="https://ocular.jeffalo.net/user/"+t[0]))&&h(Et,"href",xt),(!Lt||16&n)&&E(S,"background-color",t[4]),(!Lt||32&n)&&E(S,"color",1==t[5]?"var(--background)":"var(--text)"),Ft.ctx=t,64&n&&St!==(St=t[6])&&s(St,Ft)||b(Ft,t,n)},i(t){Lt||(x(Ft.block),Lt=!0)},o(t){for(let e=0;e<3;e+=1){const t=Ft.blocks[e];k(t)}Lt=!1},d(t){u(e),Dt.block.d(),Dt.token=null,Dt=null,t&&u(z),t&&u(S),Mt.d(),At.d(),Ot&&Ot.d(),Rt&&Rt.d(),Ut&&Ut.d(),Bt&&Bt.d(),t&&u(kt),t&&u(zt),Ft.block.d(),Ft.token=null,Ft=null}}}async function et(t){return{props:{slug:t.page.params.slug}}}function at(t,e,a){let s,n,r,{slug:l}=e,c=l,o="var(--accent)",u=0;async function h(){await fetch(`https://scratchdb.lefty.one/v3/user/info/${l}`).then((t=>t.json())).then((t=>{a(1,s=t)})),await fetch(`https://scratchdb.lefty.one/v3/forum/user/info/${l}/`).then((t=>t.json())).then((t=>{a(2,n=t)})),await fetch(`https://my-ocular.jeffalo.net/api/user/${l}`).then((t=>t.json())).then((t=>{if(a(3,r=t),a(4,o=r.color),r.color){const t=[];t.push(A(r.color).r),t.push(A(r.color).g),t.push(A(r.color).b);const e=Math.round((299*parseInt(t[0])+587*parseInt(t[1])+114*parseInt(t[2]))/1e3);a(5,u=e>150?1:0)}}))}let f=h();return z((async()=>{a(6,f=h())})),t.$$set=t=>{"slug"in t&&a(0,l=t.slug)},t.$$.update=()=>{257&t.$$.dirty&&c!==l&&(a(8,c=l),a(6,f=h()))},[l,s,n,r,o,u,f,["January","February","March","April","May","June","July","August","September","October","November","December"],c]}export default class extends t{constructor(t){super(),e(this,t,at,tt,a,{slug:0})}}export{et as load};
